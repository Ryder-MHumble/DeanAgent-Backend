# 信源爬取方案 — 总览与架构

## 背景

院长提出覆盖 7 个外部维度（国家、北京、技术、人才、产业、高校、日程）+ 1 个舆情维度（学院相关社交媒体）的信息监控需求。学院内部信息（项目进展、学生管理等）不在本爬虫方案范围内。

本方案回答三个问题：**爬什么信息、从哪些信源来、用什么方式爬最简单高效稳定**。

约束：**全部使用免费方案**，不依赖付费API。

**本方案的核心设计原则**：为每类信息追溯到最原始的首发信源，而非依赖二手转载。每个维度文档都附有「传播链条分析」，明确标注首发源与聚合源的区别。

---

## 信源全景总览

共梳理 **~100 个信源**，按获取方式分为五类：

| 获取方式 | 数量 | 说明 | 稳定性 |
|----------|------|------|--------|
| **RSS/RSSHub** | ~25 | 已有RSS或RSSHub已支持的路由，直接订阅（含新增AI公司博客RSS、Reddit） | 高 |
| **静态页面爬取** (requests+BS4) | ~40 | 政府网站、高校新闻网、高校组织部/人事处等，HTML结构简单 | 高 |
| **快照比对** (requests+diff) | ~10 | 领导信息页、教师名录等无列表更新的页面，定期抓取做diff检测变更 | 高 |
| **动态页面爬取** (Playwright) | ~10 | JS渲染页面，需无头浏览器 | 中 |
| **社交平台爬取** (Cookie/MediaCrawler) | ~15 | 微博、小红书等，需Cookie管理，反爬风险 | 低-中 |

### 各维度文档索引

| 维度 | 文档 | 信源数量 |
|------|------|----------|
| 对国家 | [01_对国家.md](01_对国家.md) | ~21 |
| 对北京 | [02_对北京.md](02_对北京.md) | ~14 |
| 对技术 | [03_对技术.md](03_对技术.md) | ~23 |
| 对人才 | [04_对人才.md](04_对人才.md) | ~10 |
| 对产业 | [05_对产业.md](05_对产业.md) | ~13 |
| 对学院(舆情) | [06_对学院_舆情.md](06_对学院_舆情.md) | ~6 |
| 对高校 | [07_对高校.md](07_对高校.md) | ~35 |
| 对日程 | [08_对日程.md](08_对日程.md) | ~4 |

---

## 核心难点专题：微信公众号

微信公众号是中国最重要但最封闭的信息源。以下技术媒体和政策媒体主要通过微信公号发布内容：新智元、青塔、PaperWeekly、各高校官方公号等。

**重要发现**：通过传播链条分析，发现部分微信公号不仅是内容渠道，而是特定信息的**唯一首发源**——这些公号的监控优先级必须高于普通聚合类公号。

### 免费方案（按推荐优先级）：

| 方案 | 原理 | 优点 | 缺点 |
|------|------|------|------|
| **1. 搜狗微信搜索** (weixin.sogou.com) | 搜狗与微信合作，可搜索公号文章 | 免费、可编程爬取 | 每个公号仅显示最近约10篇；有反爬需处理验证码 |
| **2. 微信公号后台搜索** | 登录自有公号后台，在"素材管理-转载"中可搜索全平台文章 | 最全、最可靠 | 需要有一个认证公众号；需Playwright自动化模拟操作 |
| **3. Feeddd.org** | 第三方将公号文章转为RSS | 零开发成本 | 服务不稳定，更新延迟大，可能随时停服 |
| **4. wechat-article-exporter** (开源) | 浏览器插件，从微信读书等渠道导出 | 功能完整 | 需手动操作，难以全自动化 |

**推荐方案**：方案1（搜狗微信搜索）作为主要自动化手段，方案2（公号后台）作为补充验证手段。

### 公号分级监控策略

#### 第一级：首发源级别（必须优先保障，频率4小时）

这些公号是特定信息的唯一首发源或最权威首发源，不可替代：

| 公号名称 | 首发信息类型 | 为什么是首发源 |
|----------|-------------|---------------|
| **微言教育** | 部属高校校长/书记任免 | 教育部官方公号，中组部到校宣布后，此公号是最先发布信息的公开渠道 |
| **识政** | 北京市级领导人事变动 | 北京市政务新媒体，市级人事首发渠道 |
| **中国政府网** | 国务院政策/决定 | 国务院官方公号，部分政策通过公号首发推送 |

#### 第二级：重要内容源（频率每天）

这些公号是重要信息渠道，但其内容可在对应官网获取（公号为补充/加速渠道）：

- 政策：教育部、科技部、北京发布、海淀发布、中关村管委会
- 高教：青塔、软科、麦可思研究、中国教育在线
- 兄弟单位：智源研究院、清华AIR、北大智能学院 等官方公号

#### 第三级：内容聚合源（频率每天）

这些公号的内容在其官网也可获取，公号监控为冗余保障：

- 技术：机器之心、量子位、新智元、AI科技评论、PaperWeekly、夕小瑶科技说
- 产业：36氪、虎嗅、钛媒体、投资界

---

## 技术选型总结

### 爬取工具矩阵

| 场景 | 工具 | 说明 |
|------|------|------|
| 静态HTML页面（政府、高校、新闻） | `requests` + `BeautifulSoup4` | 覆盖~55%信源，最简单稳定 |
| 动态JS渲染页面（首都之窗、部分教育部页面） | `Playwright`（Python） | 覆盖~10%信源，无头浏览器 |
| RSS源（国际技术媒体、RSSHub路由） | `feedparser` + 自建 **RSSHub** (Docker) | 覆盖~20%信源，标准化最好 |
| **快照比对**（领导信息页、教师名录、师资页面） | `requests` + `hashlib` + `difflib` | **新增模式**，覆盖~10%信源 |
| 社交媒体（小红书/微博/B站/抖音） | `MediaCrawler`（开源） | 需Cookie管理，有封号风险 |
| 微信公众号 | 搜狗微信搜索爬取 + `Playwright` 自动化 | 最难的部分，稳定性待验证 |
| ArXiv论文 | ArXiv官方 REST API | 免费，标准Atom XML |
| GitHub / Semantic Scholar | REST API | 免费，标准JSON |
| Hacker News | Firebase API | 完全免费无认证 |

### 快照比对模式（Snapshot Diff）

**适用场景**：页面不以新闻列表形式更新，而是直接替换页面内容的情况，如：
- 各部委「领导信息」页面（领导更换时直接替换姓名和照片）
- 高校教师名录页面（新引进教师直接添加到列表中）
- 高校组织部领导班子页面（副校长变更时直接替换）

**技术实现**：
```
1. 定期抓取目标页面的全文内容
2. 用 hashlib.md5() 对页面内容做哈希
3. 与数据库中上次快照的哈希比对
4. 如果哈希不同，用 difflib.unified_diff() 提取具体变更内容
5. 将变更内容作为"事件"入库，触发通知
```

**关键设计考虑**：
- 需过滤页面中的动态内容（时间戳、访问计数器、广告位），避免误报
- 建议对页面做结构化提取（只比对关键内容区域的文本），而非全文比对
- 变更检测后可用LLM自动分析变更含义（如"XX大学副校长由A变更为B"）

### 存储方案（轻量起步）

初期不需要重型数据库，可以用：
- **SQLite** 存储文章元数据（标题、URL、时间、来源、分类）
- **JSON文件** 存储文章全文
- 后续按需升级到 PostgreSQL + Elasticsearch

### 调度方案

- 轻量选择：`APScheduler`（Python库，单进程即可）
- 后续扩展：`Celery` + `Redis`

---

## 信源优先级排序

基于「实现难度低 × 信息价值高 × 是否为首发源」原则（相比原方案，增加了「首发源」维度——直接监控信息首发点的价值远大于二手转载）：

### 第一梯队（最易实现，价值最高） — 约55个信源
- 全部政府网站（国家+北京，约20个源，含新增国新办/政府门户人事栏/北京市人大/首都之窗人事栏）— 全部Easy，requests即可
- 国际技术RSS源（11个源，含新增Anthropic/Meta AI/Microsoft Research博客）— 原生RSS/API，零反爬
- 国内技术媒体的RSSHub路由（3个源）— 部署RSSHub即可
- 高校新闻网模板化爬虫（15个源）— 结构相似，一套模板搞定
- **新增**：省级教育厅（5个源）— Easy，requests即可，覆盖省属高校人事首发
- **新增**：Reddit子版块（2个源）— RSSHub路由，Easy

### 第二梯队（中等难度） — 约30个信源
- 产业新闻网站（6个源）— 有轻度反爬需限速
- 人才数据源（CSRankings/AMiner/Semantic Scholar/NSFC公示等，7个源）
- 会议活动源（4个源）
- 微博/知乎 KOL监控（2个源）— 需Cookie管理
- **新增**：高校组织部/人事处页面（15个源）— Easy-Medium，覆盖副校长级人事
- **新增**：交易所信息披露/SEC EDGAR（4个源）— Medium，覆盖IPO首发信息

### 第三梯队（难度最高） — 约20个信源
- 小红书/抖音舆情监控 — MediaCrawler，封号风险
- 微信公众号（含首发源级别的微言教育/识政）— 搜狗微信方案，稳定性不确定
- Twitter/X — 免费方案不稳定
- **新增**：快照比对目标（各部委领导信息页、高校师资页面、院系教师名录）— 技术上Easy但需精细调优防误报

---

## 不可爬/需后续处理的部分

以下需求不属于爬虫范畴，但说明获取路径：

| 需求 | 为什么不能爬 | 后续处理方案 |
|------|-------------|-------------|
| 学院内部信息（项目、学生、中心） | 内部系统数据 | 对接OA/内部API（本方案不涉及） |
| 人才回国意向 | 非公开信息 | 多信号交叉检测：ArXiv affiliation变更 + 高校师资页面快照比对 + NSFC公示名单分析 + 高校新闻关键词过滤（详见 [04_对人才.md](04_对人才.md) 第4.3节） |
| "需要恭喜的人" | 需与"关系人名单"交叉 | 爬取人事变动/获奖数据 → 与预设名单匹配 → 输出提醒 |
| 日程冲突检测 | 需对接日历 | 对接飞书/Outlook日历API（本方案不涉及） |
| "内参机会"判断 | 需人类判断 | LLM基于爬取数据生成建议 → 人工审核 |
| 重要度评估 | 需综合分析 | LLM分析（组织方级别、嘉宾阵容、历史数据） |

---

## 合规与风险提示

1. **政府网站最安全**：鼓励信息公开，基本无反爬措施
2. **新闻网站低风险**：公开信息，注意限速即可
3. **社交平台高风险**：微信/小红书/微博均有反爬起诉先例
   - 仅爬取公开内容，不存储个人隐私数据
   - 使用小号，控制频率
   - 遵守 robots.txt
4. **数据合规**：遵守《个人信息保护法》《数据安全法》
